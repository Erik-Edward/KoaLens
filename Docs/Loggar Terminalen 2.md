LOG  Initializing Supabase client for platform: android
 LOG  Använder riktig Firebase Analytics
 LOG  [Feedback Dummy] Initialized
 LOG  VisionCamera: Successfully loaded native module
 LOG  ImageCropPicker: Successfully loaded native module
 LOG  [Sentry] Limited functionality wrapper created for Expo Go
 LOG  [SplashScreen] Using real implementation
 LOG  [Sentry] Using limited functionality in Expo Go
 LOG  Sentry Logger [log]: Integration installed: ModulesLoader
 LOG  Sentry Logger [log]: Unhandled promise rejections will be caught by Sentry.
 LOG  Sentry Logger [log]: Integration installed: ReactNativeErrorHandlers
 LOG  Sentry Logger [log]: Integration installed: Release
 LOG  Sentry Logger [log]: Integration installed: InboundFilters
 LOG  Sentry Logger [log]: Integration installed: FunctionToString
 LOG  Sentry Logger [log]: Integration installed: Breadcrumbs
 LOG  Sentry Logger [log]: Integration installed: LinkedErrors
 LOG  Sentry Logger [log]: Integration installed: Dedupe
 LOG  Sentry Logger [log]: Integration installed: HttpContext
 LOG  Sentry Logger [log]: Integration installed: EventOrigin
 LOG  Sentry Logger [log]: Integration installed: SdkInfo
 LOG  Sentry Logger [log]: Integration installed: ReactNativeInfo
 LOG  Sentry Logger [log]: Integration installed: DebugSymbolicator
 LOG  Sentry Logger [log]: Integration installed: RewriteFrames
 LOG  Sentry Logger [log]: Integration installed: DeviceContext
 ERROR  Sentry Logger [error]: [SentryError: Native Client is not available, can't start on native.] [Component Stack]
 LOG  Sentry Logger [log]: [ReactNativeTracing] Native frames instrumentation initialized.
 LOG  Sentry Logger [log]: [ReactNativeTracing] Not instrumenting route changes as routingInstrumentation has not been set.
 LOG  Sentry Logger [log]: Integration installed: ReactNativeTracing
 ERROR  Sentry Logger [error]: Error while triggering instrumentation handler.
Type: console
Name: _consoleBreadcrumb
Error: [SentryError: Native Client is not available, can't start on native.] [Component Stack]
 WARN  [sentry-expo] Disabling the Sentry Native SDK (all JS errors will still be reported).
To enable it, run 'yarn add @sentry/react-native' or 'npm install @sentry/react-native' in your project directory. To silence this warning, pass 'enableNative: false' to Sentry.init(). [Component Stack]
 LOG  Sentry Logger [log]: Integration installed: ExpoBareIntegration
 LOG  Initializing Supabase in layout...
 LOG  Supabase initialized successfully
 LOG  AuthProvider: Initial setup
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  AuthProvider: Initial session check {"emailConfirmed": undefined, "hasAvatar": false, "hasSession": false}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead.
 LOG  AuthProvider: Auth state change {"event": "INITIAL_SESSION", "hasSession": false}
 LOG  AuthProvider: Hanterar ej auth event INITIAL_SESSION
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead.
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead.
 LOG  Firebase Analytics initialized successfully
 LOG  Analytics initialized successfully
 LOG  AuthProvider: AppState "active" – startar polling för sessionuppdatering
 LOG  AuthProvider: Checking onboarding status: {"currentStep": 0, "hasAcceptedDisclaimer": true, "hasCompletedOnboarding": false}
 LOG  AuthProvider: Onboarding not completed, redirecting to onboarding
 LOG  AuthProvider: No session but onboarding not completed, staying in onboarding
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Startar registreringsprocess med email {"email": "erik.edvardsson.office+36@gmail.com"}
 LOG  AuthProvider: Förbereder användarmetadata {"avatarId": "rabbit", "avatarStyle": "cute", "veganStatus": "vegan", "veganYears": 1.5}
 LOG  AuthProvider: Ingen giltig session, tvingar omdirigering till login
 LOG  Login: Fyller i e-postadress från URL-parametrar: erik.edvardsson.office+36@gmail.com
 LOG  AuthProvider: Deep link detected: koalens://#access_token=eyJhbGciOiJIUzI1NiIsImtpZCI6IlFNMDhzcFM3Z1kwcmY2RnUiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xpeml1am9oZGtkbWFvZ2ZvZ2plLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiI4ODdlNjA4OC0xYzQ0LTQxMmItYTRkNy1iOTllZjBkZTgyZGYiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQxNzg1ODk0LCJpYXQiOjE3NDE3ODIyOTQsImVtYWlsIjoiZXJpay5lZHZhcmRzc29uLm9mZmljZSszNkBnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbImVtYWlsIl19LCJ1c2VyX21ldGFkYXRhIjp7ImF2YXRhcl9pZCI6InJhYmJpdCIsImF2YXRhcl9zdHlsZSI6ImN1dGUiLCJlbWFpbCI6ImVyaWsuZWR2YXJkc3Nvbi5vZmZpY2UrMzZAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBob25lX3ZlcmlmaWVkIjpmYWxzZSwic3ViIjoiODg3ZTYwODgtMWM0NC00MTJiLWE0ZDctYjk5ZWYwZGU4MmRmIiwidmVnYW5fc3RhdHVzIjoidmVnYW4iLCJ2ZWdhbl95ZWFycyI6MS41fSwicm9sZSI6ImF1dGhlbnRpY2F0ZWQiLCJhYWwiOiJhYWwxIiwiYW1yIjpbeyJtZXRob2QiOiJvdHAiLCJ0aW1lc3RhbXAiOjE3NDE3ODIyOTR9XSwic2Vzc2lvbl9pZCI6IjFlNzczYzkyLTZhZTMtNGRkNC04MmE5LWU3MzZmNTY1NGUyMCIsImlzX2Fub255bW91cyI6ZmFsc2V9.xfIyIuhrBS8OapJWnSeJwxXCR-CAgBhLaYd_kBwtrLo&expires_at=1741785894&expires_in=3600&refresh_token=pcyYT8AaamX6V8-oMRPkJg&token_type=bearer&type=signup
 LOG  AuthProvider: Verification deep link detected with token
 LOG  AuthProvider: Found access token in URL
 LOG  AuthProvider: Successfully extracted email from token: erik.edvardsson.office+36@gmail.com
 LOG  AuthProvider: AppState "active" – startar polling för sessionuppdatering
 LOG  AuthProvider: No valid session but email extracted from token: erik.edvardsson.office+36@gmail.com
 LOG  Login: Fyller i e-postadress från URL-parametrar: erik.edvardsson.office+36@gmail.com
 LOG  AuthProvider: Polling session null
 LOG  AuthProvider: Auth state change {"event": "SIGNED_IN", "hasSession": true}
 LOG  getUserProducts anropat med: {"hasUser": false, "productsCount": 6, "userId": "ingen användare"}
 WARN  getUserProducts: Ingen inloggad användare hittades [Component Stack]
 LOG  Current user products in store: []
 LOG  UserProfileSync: Kontrollerar första inloggning för användare 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging screen view History
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Analytics: Logging event history_stats {"app_version": 31, "favorite_products": 0, "platform": "android", "total_products": 0, "vegan_products": 0}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  AuthProvider: Synkroniserar avatar från user_metadata vid auth change: {"id": "rabbit", "style": "cute"}
 LOG  AuthProvider: Användarprofil synkroniserad med store vid auth change
 LOG  AuthProvider: Användare inloggad {"email": "erik.edvardsson.office+36@gmail.com", "emailConfirmed": "2025-03-12T12:24:54.281701Z", "hasAvatar": true}
 LOG  UsageLimitIndicator mounted/updated, current values: {"analysesLimit": 2, "analysesUsed": 0}
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  ScanScreen component mounted, pathname: /
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging screen view ScanScreen
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Navigation state changed, pathname: / isCameraOrSubRoute: false
 LOG  Scan tab focused, ensuring clean state
 LOG  UserProfileSync: Första inloggning detekterad för användare 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Starting debounced reset
 LOG  Performing debounced reset now
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  AuthProvider: Polling session {"access_token": "eyJhbGciOiJIUzI1NiIsImtpZCI6IlFNMDhzcFM3Z1kwcmY2RnUiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xpeml1am9oZGtkbWFvZ2ZvZ2plLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiI4ODdlNjA4OC0xYzQ0LTQxMmItYTRkNy1iOTllZjBkZTgyZGYiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQxNzg1OTAxLCJpYXQiOjE3NDE3ODIzMDEsImVtYWlsIjoiZXJpay5lZHZhcmRzc29uLm9mZmljZSszNkBnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbImVtYWlsIl19LCJ1c2VyX21ldGFkYXRhIjp7ImF2YXRhcl9pZCI6InJhYmJpdCIsImF2YXRhcl9zdHlsZSI6ImN1dGUiLCJlbWFpbCI6ImVyaWsuZWR2YXJkc3Nvbi5vZmZpY2UrMzZAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBob25lX3ZlcmlmaWVkIjpmYWxzZSwic3ViIjoiODg3ZTYwODgtMWM0NC00MTJiLWE0ZDctYjk5ZWYwZGU4MmRmIiwidmVnYW5fc3RhdHVzIjoidmVnYW4iLCJ2ZWdhbl95ZWFycyI6MS41fSwicm9sZSI6ImF1dGhlbnRpY2F0ZWQiLCJhYWwiOiJhYWwxIiwiYW1yIjpbeyJtZXRob2QiOiJwYXNzd29yZCIsInRpbWVzdGFtcCI6MTc0MTc4MjMwMX1dLCJzZXNzaW9uX2lkIjoiOGIxOWQzYTMtOWVkZS00YzNlLTkwZmYtODM4MGViZWY4OTVjIiwiaXNfYW5vbnltb3VzIjpmYWxzZX0.ap1APOCDGFdA-3Op_G5LZq2tG6YmJC8vk3CRiOBrnt0", "expires_at": 1741785901, "expires_in": 3600, "refresh_token": "1J6kfQwTx9wS2-bF15CZ9w", "token_type": "bearer", "user": {"app_metadata": {"provider": "email", "providers": [Array]}, "aud": "authenticated", "confirmation_sent_at": "2025-03-12T12:24:36.025049Z", "confirmed_at": "2025-03-12T12:24:54.281701Z", "created_at": "2025-03-12T12:24:35.998158Z", "email": "erik.edvardsson.office+36@gmail.com", "email_confirmed_at": "2025-03-12T12:24:54.281701Z", "id": "887e6088-1c44-412b-a4d7-b99ef0de82df", "identities": [[Object]], "is_anonymous": false, "last_sign_in_at": "2025-03-12T12:25:01.103927954Z", "phone": "", "role": "authenticated", "updated_at": "2025-03-12T12:25:01.106017Z", "user_metadata": {"avatar_id": "rabbit", "avatar_style": "cute", "email": "erik.edvardsson.office+36@gmail.com", "email_verified": true, "phone_verified": false, "sub": "887e6088-1c44-412b-a4d7-b99ef0de82df", "vegan_status": "vegan", "vegan_years": 1.5}}}
 LOG  AuthProvider: Session uppdaterad med verifierad e-post
 LOG  ScanScreen component unmounting
 LOG  UsageLimitIndicator mounted/updated, current values: {"analysesLimit": 2, "analysesUsed": 0}
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  ScanScreen component mounted, pathname: /
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging screen view ScanScreen
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Scan tab focused, ensuring clean state
 LOG  Navigation state changed, pathname: / isCameraOrSubRoute: false
 LOG  AuthProvider: Synkroniserar avatar från polling: {"id": "rabbit", "style": "cute"}
 LOG  Global app state reset completed
 LOG  Starting debounced reset
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Performing debounced reset now
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  UsageLimitIndicator mounted/updated, current values: {"analysesLimit": 2, "analysesUsed": 0}
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Scan tab focused, ensuring clean state
 LOG  Starting debounced reset
 LOG  Performing debounced reset now
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Navigating to camera with permissions already granted
 LOG  Setting up camera screen navigation lock
 LOG  Setting up navigation protection
 LOG  Analytics: Logging screen view Camera
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Camera screen mounted
 LOG  Navigation state changed, pathname: / isCameraOrSubRoute: false
 LOG  ScanScreen component unmounting
 LOG  ScanScreen component mounted, pathname: /camera
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /camera
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Camera navigation locked successfully
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Analytics: Logging event scan_started {"app_version": 31, "platform": "android"}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead.
 LOG  Navigation unlocked for photo navigation
 LOG  Setting up navigation protection
 LOG  Navigating to crop screen
 LOG  Navigation state changed, pathname: /camera isCameraOrSubRoute: true
 LOG  ScanScreen component unmounting
 LOG  ScanScreen component mounted, pathname: /crop
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /crop
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  getUserProducts anropat med: {"hasUser": false, "productsCount": 6, "userId": "ingen användare"}
 WARN  getUserProducts: Ingen inloggad användare hittades [Component Stack]
 LOG  Hämtade användarprodukter: 0
 LOG  Analytics: Logging screen view AnalysisResult
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  [Navigation]: 12:25:54 - ResultScreen monterad, initierar analys
 LOG  [Navigation]: 12:25:54 - Startar analys med användar-ID: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging event analysis_started {"app_version": 31, "platform": "android"}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Kontrollerar anslutning till: https://koalens-backend.fly.dev
 LOG  Navigation state changed, pathname: /crop isCameraOrSubRoute: true
 LOG  ScanScreen component unmounting
 LOG  ScanScreen component mounted, pathname: /result
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /result
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  AuthProvider: AppState "active" – startar polling för sessionuppdatering
 LOG  [Navigation]: 12:25:54 - Resultatnavigering låst
 LOG  Global app state reset completed
 LOG  Backend anslutning status: 200 true
 LOG  Starting ingredient analysis for: file:///storage/emulated/0/Android/data/com.erikedward.KoaLens/files/Pictures/ca602191-3bad-4065-b032-37850c22af89.jpg userId: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Image converted to base64, size: 1527 KB
 LOG  Network state: {"details": {"bssid": "02:00:00:00:00:00", "frequency": 5240, "ipAddress": "192.168.1.73", "isConnectionExpensive": false, "linkSpeed": 780, "rxLinkSpeed": 975, "strength": 99, "subnet": "255.255.255.0", "txLinkSpeed": 780}, "isConnected": true, "isInternetReachable": true, "isWifiEnabled": true, "type": "wifi"} isConnected: true userId: 887e6088-1c44-412b-a4d7-b99ef0de82df 
 LOG  Sending analysis request to https://koalens-backend.fly.dev with userId: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  AuthProvider: Polling session {"access_token": "eyJhbGciOiJIUzI1NiIsImtpZCI6IlFNMDhzcFM3Z1kwcmY2RnUiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2xpeml1am9oZGtkbWFvZ2ZvZ2plLnN1cGFiYXNlLmNvL2F1dGgvdjEiLCJzdWIiOiI4ODdlNjA4OC0xYzQ0LTQxMmItYTRkNy1iOTllZjBkZTgyZGYiLCJhdWQiOiJhdXRoZW50aWNhdGVkIiwiZXhwIjoxNzQxNzg1OTAxLCJpYXQiOjE3NDE3ODIzMDEsImVtYWlsIjoiZXJpay5lZHZhcmRzc29uLm9mZmljZSszNkBnbWFpbC5jb20iLCJwaG9uZSI6IiIsImFwcF9tZXRhZGF0YSI6eyJwcm92aWRlciI6ImVtYWlsIiwicHJvdmlkZXJzIjpbImVtYWlsIl19LCJ1c2VyX21ldGFkYXRhIjp7ImF2YXRhcl9pZCI6InJhYmJpdCIsImF2YXRhcl9zdHlsZSI6ImN1dGUiLCJlbWFpbCI6ImVyaWsuZWR2YXJkc3Nvbi5vZmZpY2UrMzZAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsInBob25lX3ZlcmlmaWVkIjpmYWxzZSwic3ViIjoiODg3ZTYwODgtMWM0NC00MTJiLWE0ZDctYjk5ZWYwZGU4MmRmIiwidmVnYW5fc3RhdHVzIjoidmVnYW4iLCJ2ZWdhbl95ZWFycyI6MS41fSwicm9sZSI6ImF1dGhlbnRpY2F0ZWQiLCJhYWwiOiJhYWwxIiwiYW1yIjpbeyJtZXRob2QiOiJwYXNzd29yZCIsInRpbWVzdGFtcCI6MTc0MTc4MjMwMX1dLCJzZXNzaW9uX2lkIjoiOGIxOWQzYTMtOWVkZS00YzNlLTkwZmYtODM4MGViZWY4OTVjIiwiaXNfYW5vbnltb3VzIjpmYWxzZX0.ap1APOCDGFdA-3Op_G5LZq2tG6YmJC8vk3CRiOBrnt0", "expires_at": 1741785901, "expires_in": 3600, "refresh_token": "1J6kfQwTx9wS2-bF15CZ9w", "token_type": "bearer", "user": {"app_metadata": {"provider": "email", "providers": [Array]}, "aud": "authenticated", "confirmation_sent_at": "2025-03-12T12:24:36.025049Z", "confirmed_at": "2025-03-12T12:24:54.281701Z", "created_at": "2025-03-12T12:24:35.998158Z", "email": "erik.edvardsson.office+36@gmail.com", "email_confirmed_at": "2025-03-12T12:24:54.281701Z", "id": "887e6088-1c44-412b-a4d7-b99ef0de82df", "identities": [[Object]], "is_anonymous": false, "last_sign_in_at": "2025-03-12T12:25:01.103927954Z", "phone": "", "role": "authenticated", "updated_at": "2025-03-12T12:25:01.106017Z", "user_metadata": {"avatar_id": "rabbit", "avatar_style": "cute", "email": "erik.edvardsson.office+36@gmail.com", "email_verified": true, "phone_verified": false, "sub": "887e6088-1c44-412b-a4d7-b99ef0de82df", "vegan_status": "vegan", "vegan_years": 1.5}}}
 LOG  AuthProvider: Session uppdaterad med verifierad e-post
 LOG  [Navigation]: 12:26:00 - Förhindrade automatisk navigering från resultatskärm
 LOG  AuthProvider: Synkroniserar avatar från polling: {"id": "rabbit", "style": "cute"}
 LOG  ScanScreen component unmounting
 LOG  ScanScreen component mounted, pathname: /result
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /result
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging screen view ScanScreen
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  [Navigation]: 12:26:00 - Hoppar över analys: Ingen photoPath eller redan analyserad
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Raw response data received
 LOG  Analysis completed, userId was: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Sanitized result created with values: {"confidence": 1, "ingredients": 4, "isVegan": true}
 LOG  Analytics: Logging event analysis_completed {"app_version": 31, "confidence": 100, "ingredient_count": 4, "is_vegan": true, "non_vegan_count": 0, "platform": "android", "userId": "887e6088-1c44-412b-a4d7-b99ef0de82df", "watched_found": 0}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead.
 LOG  Analysis successful, returning sanitized result
 LOG  API-anrop för analys lyckades {"allIngredients": ["Finskuren lök", "palmolja", "vetemjöl", "salt"], "confidence": 1, "isVegan": true, "nonVeganIngredients": [], "reasoning": "Produkten är vegansk. Ingredienserna består av lök, palmolja, vetemjöl och salt som alla är växtbaserade. Produkten är en standard rostad lök som vanligtvis används som garnering eller smaksättare.

Alla ingredienser bedöms som veganska.", "watchedIngredientsFound": []}
 LOG  Resultatstrukturvalidering godkänd
 LOG  Lägger till produkt, data: {"confidence": 1, "hasUserId": false, "imageUri": "provided", "ingredientsCount": 4, "isVegan": true}
 WARN  addProduct: Försöker lägga till produkt utan inloggad användare!
 LOG  Creating valid product: 978c4a9a-a3ce-4784-911a-e7162317a82c {"confidence": 1, "ingredients": 4, "isVegan": true}
 LOG  Produkt tillagd i store med ID: 978c4a9a-a3ce-4784-911a-e7162317a82c
 LOG  getUserProducts anropat med: {"hasUser": false, "productsCount": 7, "userId": "ingen användare"}
 WARN  getUserProducts: Ingen inloggad användare hittades
 LOG  Product count verification: {"added": true, "allProducts": 7, "userProducts": 0}
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Användningsgräns uppdaterad
 ERROR  Warning: React has detected a change in the order of Hooks called by ResultScreen. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://react.dev/link/rules-of-hooks

   Previous render            Next render
   ------------------------------------------------------
1. useContext                 useContext
2. useState                   useState
3. useState                   useState
4. useState                   useState
5. useState                   useState
6. useState                   useState
7. useState                   useState
8. useState                   useState
9. useState                   useState
10. useRef                    useRef
11. useRef                    useRef
12. useRef                    useRef
13. useRef                    useRef
14. useRef                    useRef
15. useContext                useContext
16. useSyncExternalStore      useSyncExternalStore
17. useDebugValue             useDebugValue
18. useSyncExternalStore      useSyncExternalStore
19. useDebugValue             useDebugValue
20. useCallback               useCallback
21. useEffect                 useEffect
22. useContext                useContext
23. useSyncExternalStore      useSyncExternalStore
24. useDebugValue             useDebugValue
25. useSyncExternalStore      useSyncExternalStore
26. useDebugValue             useDebugValue
27. useContext                useContext
28. useContext                useContext
29. useSyncExternalStore      useSyncExternalStore
30. useMemo                   useMemo
31. useSyncExternalStore      useSyncExternalStore
32. useCallback               useCallback
33. useMemo                   useMemo
34. useCallback               useCallback
35. useEffect                 useEffect
36. useEffect                 useEffect
37. useEffect                 useEffect
38. useEffect                 useEffect
39. useEffect                 useEffect
40. useEffect                 useEffect
41. useEffect                 useEffect
42. undefined                 useEffect
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    in ResultScreen
    in Unknown (created by Route(result))
    in Suspense (created by Route(result))
    in Route (created by Route(result))
    in Route(result) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by NativeStackNavigator)
    in RNSScreenContentWrapper (created by ScreenContentWrapper)
    in ScreenContentWrapper (created by DebugContainer)
    in DebugContainer
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen
    in ScreenStackItem (created by SceneView)
    in SceneView (created by NativeStackView)
    in RNSScreenStack (created by ScreenStack)
    in Unknown (created by ScreenStack)
    in ScreenStack (created by NativeStackView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by NativeStackView)
    in NativeStackView (created by NativeStackNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by NativeStackNavigator)
    in NativeStackNavigator
    in Unknown (created by ScanLayout)
    in ScanLayout
    in Unknown (created by Route((scan)))
    in Suspense (created by Route((scan)))
    in Route (created by Route((scan)))
    in Route((scan)) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by BottomTabNavigator)
    in RCTView (created by View)
    in View (created by Screen)
    in RCTView (created by View)
    in View (created by Animated(View))
    in Animated(View) (created by Background)
    in Background (created by Screen)
    in Screen (created by BottomTabView)
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen (created by MaybeScreen)
    in MaybeScreen (created by BottomTabView)
    in RNSScreenContainer (created by ScreenContainer)
    in ScreenContainer (created by MaybeScreenContainer)
    in MaybeScreenContainer (created by BottomTabView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by BottomTabView)
    in BottomTabView (created by BottomTabNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by BottomTabNavigator)
    in BottomTabNavigator
    in Unknown (created by TabLayout)
    in TabLayout
    in Unknown (created by Route((tabs)))
    in Suspense (created by Route((tabs)))
    in Route (created by Route((tabs)))
    in Route((tabs)) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by NativeStackNavigator)
    in RNSScreenContentWrapper (created by ScreenContentWrapper)
    in ScreenContentWrapper (created by DebugContainer)
    in DebugContainer
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen
    in ScreenStackItem (created by SceneView)
    in SceneView (created by NativeStackView)
    in RNSScreenStack (created by ScreenStack)
    in Unknown (created by ScreenStack)
    in ScreenStack (created by NativeStackView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by NativeStackView)
    in NativeStackView (created by NativeStackNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by NativeStackNavigator)
    in NativeStackNavigator
    in Unknown (created by RootLayout)
    in AuthProvider (created by RootLayout)
    in ErrorBoundary (created by RootLayout)
    in RootLayout
    in Unknown (created by Route())
    in Suspense (created by Route())
    in Route (created by Route())
    in Route() (created by ContextNavigator)
    in RNCSafeAreaProvider (created by SafeAreaProvider)
    in SafeAreaProvider (created by wrapper)
    in wrapper (created by ContextNavigator)
    in ThemeProvider
    in EnsureSingleNavigator
    in BaseNavigationContainer
    in NavigationContainerInner (created by ContextNavigator)
    in ContextNavigator (created by ExpoRoot)
    in ExpoRoot (created by App)
    in App (created by ErrorOverlay)
    in ErrorToastContainer (created by ErrorOverlay)
    in ErrorOverlay (created by withDevTools(ErrorOverlay))
    in withDevTools(ErrorOverlay)
    in RCTView (created by View)
    in View (created by AppContainer)
    in RCTView (created by View)
    in View (created by AppContainer)
    in AppContainer
    in main(RootComponent)
 ERROR  Warning: Error: Rendered more hooks than during the previous render.

This error is located at:
    in ResultScreen
    in Unknown (created by Route(result))
    in Suspense (created by Route(result))
    in Route (created by Route(result))
    in Route(result) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by NativeStackNavigator)
    in RNSScreenContentWrapper (created by ScreenContentWrapper)
    in ScreenContentWrapper (created by DebugContainer)
    in DebugContainer
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen
    in ScreenStackItem (created by SceneView)
    in SceneView (created by NativeStackView)
    in RNSScreenStack (created by ScreenStack)
    in Unknown (created by ScreenStack)
    in ScreenStack (created by NativeStackView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by NativeStackView)
    in NativeStackView (created by NativeStackNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by NativeStackNavigator)
    in NativeStackNavigator
    in Unknown (created by ScanLayout)
    in ScanLayout
    in Unknown (created by Route((scan)))
    in Suspense (created by Route((scan)))
    in Route (created by Route((scan)))
    in Route((scan)) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by BottomTabNavigator)
    in RCTView (created by View)
    in View (created by Screen)
    in RCTView (created by View)
    in View (created by Animated(View))
    in Animated(View) (created by Background)
    in Background (created by Screen)
    in Screen (created by BottomTabView)
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen (created by MaybeScreen)
    in MaybeScreen (created by BottomTabView)
    in RNSScreenContainer (created by ScreenContainer)
    in ScreenContainer (created by MaybeScreenContainer)
    in MaybeScreenContainer (created by BottomTabView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by BottomTabView)
    in BottomTabView (created by BottomTabNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by BottomTabNavigator)
    in BottomTabNavigator
    in Unknown (created by TabLayout)
    in TabLayout
    in Unknown (created by Route((tabs)))
    in Suspense (created by Route((tabs)))
    in Route (created by Route((tabs)))
    in Route((tabs)) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by NativeStackNavigator)
    in RNSScreenContentWrapper (created by ScreenContentWrapper)
    in ScreenContentWrapper (created by DebugContainer)
    in DebugContainer
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen
    in ScreenStackItem (created by SceneView)
    in SceneView (created by NativeStackView)
    in RNSScreenStack (created by ScreenStack)
    in Unknown (created by ScreenStack)
    in ScreenStack (created by NativeStackView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by NativeStackView)
    in NativeStackView (created by NativeStackNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by NativeStackNavigator)
    in NativeStackNavigator
    in Unknown (created by RootLayout)
    in AuthProvider (created by RootLayout)
    in ErrorBoundary (created by RootLayout)
    in RootLayout
    in Unknown (created by Route())
    in Suspense (created by Route())
    in Route (created by Route())
    in Route() (created by ContextNavigator)
    in RNCSafeAreaProvider (created by SafeAreaProvider)
    in SafeAreaProvider (created by wrapper)
    in wrapper (created by ContextNavigator)
    in ThemeProvider
    in EnsureSingleNavigator
    in BaseNavigationContainer
    in NavigationContainerInner (created by ContextNavigator)
    in ContextNavigator (created by ExpoRoot)
    in ExpoRoot (created by App)
    in App (created by ErrorOverlay)
    in ErrorToastContainer (created by ErrorOverlay)
    in ErrorOverlay (created by withDevTools(ErrorOverlay))
    in withDevTools(ErrorOverlay)
    in RCTView (created by View)
    in View (created by AppContainer)
    in RCTView (created by View)
    in View (created by AppContainer)
    in AppContainer
    in main(RootComponent), js engine: hermes
 ERROR  Uncaught error in component: [Error: Rendered more hooks than during the previous render.] {"componentStack": "
    in ResultScreen
    in Unknown (created by Route(result))
    in Suspense (created by Route(result))
    in Route (created by Route(result))
    in Route(result) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by NativeStackNavigator)
    in RNSScreenContentWrapper (created by ScreenContentWrapper)
    in ScreenContentWrapper (created by DebugContainer)
    in DebugContainer
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen
    in ScreenStackItem (created by SceneView)
    in SceneView (created by NativeStackView)
    in RNSScreenStack (created by ScreenStack)
    in Unknown (created by ScreenStack)
    in ScreenStack (created by NativeStackView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by NativeStackView)
    in NativeStackView (created by NativeStackNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by NativeStackNavigator)
    in NativeStackNavigator
    in Unknown (created by ScanLayout)
    in ScanLayout
    in Unknown (created by Route((scan)))
    in Suspense (created by Route((scan)))
    in Route (created by Route((scan)))
    in Route((scan)) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by BottomTabNavigator)
    in RCTView (created by View)
    in View (created by Screen)
    in RCTView (created by View)
    in View (created by Animated(View))
    in Animated(View) (created by Background)
    in Background (created by Screen)
    in Screen (created by BottomTabView)
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen (created by MaybeScreen)
    in MaybeScreen (created by BottomTabView)
    in RNSScreenContainer (created by ScreenContainer)
    in ScreenContainer (created by MaybeScreenContainer)
    in MaybeScreenContainer (created by BottomTabView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by BottomTabView)
    in BottomTabView (created by BottomTabNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by BottomTabNavigator)
    in BottomTabNavigator
    in Unknown (created by TabLayout)
    in TabLayout
    in Unknown (created by Route((tabs)))
    in Suspense (created by Route((tabs)))
    in Route (created by Route((tabs)))
    in Route((tabs)) (created by SceneView)
    in StaticContainer
    in EnsureSingleNavigator (created by SceneView)
    in SceneView (created by NativeStackNavigator)
    in RNSScreenContentWrapper (created by ScreenContentWrapper)
    in ScreenContentWrapper (created by DebugContainer)
    in DebugContainer
    in RNSScreen (created by Animated(Anonymous))
    in Animated(Anonymous)
    in Suspender (created by Freeze)
    in Suspense (created by Freeze)
    in Freeze (created by DelayedFreeze)
    in DelayedFreeze
    in InnerScreen (created by Screen)
    in Screen
    in ScreenStackItem (created by SceneView)
    in SceneView (created by NativeStackView)
    in RNSScreenStack (created by ScreenStack)
    in Unknown (created by ScreenStack)
    in ScreenStack (created by NativeStackView)
    in RCTView (created by View)
    in View (created by SafeAreaProviderCompat)
    in SafeAreaProviderCompat (created by NativeStackView)
    in NativeStackView (created by NativeStackNavigator)
    in PreventRemoveProvider (created by NavigationContent)
    in NavigationContent
    in Unknown (created by NativeStackNavigator)
    in NativeStackNavigator
    in Unknown (created by RootLayout)
    in AuthProvider (created by RootLayout)
    in ErrorBoundary (created by RootLayout)
    in RootLayout
    in Unknown (created by Route())
    in Suspense (created by Route())
    in Route (created by Route())
    in Route() (created by ContextNavigator)
    in RNCSafeAreaProvider (created by SafeAreaProvider)
    in SafeAreaProvider (created by wrapper)
    in wrapper (created by ContextNavigator)
    in ThemeProvider
    in EnsureSingleNavigator
    in BaseNavigationContainer
    in NavigationContainerInner (created by ContextNavigator)
    in ContextNavigator (created by ExpoRoot)
    in ExpoRoot (created by App)
    in App (created by ErrorOverlay)
    in ErrorToastContainer (created by ErrorOverlay)
    in ErrorOverlay (created by withDevTools(ErrorOverlay))
    in withDevTools(ErrorOverlay)
    in RCTView (created by View)
    in View (created by AppContainer)
    in RCTView (created by View)
    in View (created by AppContainer)
    in AppContainer
    in main(RootComponent)"} [Component Stack]
 LOG  UI-tillstånd uppdaterat för att visa slutförd skärm
 LOG  Produktantal efter tillägg: 0
 ERROR  Inga produkter hittades efter tillägg i store
 ERROR  Fel under analyssteg "verify_product": {"message": "Produkten kunde inte läggas till i historik", "stack": "Error: Produkten kunde inte läggas till i historik
    at ?anon_0_ (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:385018:32)
    at next (native)
    at asyncGeneratorStep (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:5548:19)
    at _next (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:5562:29)
    at tryCallOne (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211121:16)
    at anonymous (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:211202:27)
    at apply (native)
    at anonymous (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:12801:50)
    at _callTimer (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:12725:17)
    at _callReactNativeMicrotasksPass (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:12755:17)
    at callReactNativeMicrotasks (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:12910:44)
    at __callReactNativeMicrotasks (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:3169:48)
    at anonymous (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:2983:43)
    at __guard (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:3152:15)
    at flushedQueue (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:2982:21)
    at invokeCallbackAndReturnFlushedQueue (http://192.168.1.67:8081/node_modules/expo-router/entry.bundle//&platform=android&dev=true&hot=false&transform.engine=hermes&transform.bytecode=1&transform.routerRoot=app&unstable_transformProfile=hermes-stable:2977:33)"}
 LOG  Aktuellt produktantal trots fel: 0
 LOG  [Navigation]: 12:26:03 - Analysfel: Fel i analysen (verify_product): Produkten kunde inte läggas till i historik
 ERROR  Analysfeldetaljer: [Error: Fel i analysen (verify_product): Produkten kunde inte läggas till i historik]
 LOG  Sentry Logger [log]: Failed to get modules from native: SentryError: Native is disabled
 LOG  Sentry Logger [log]: Failed to get modules from native: SentryError: Native is disabled
 LOG  AuthProvider: Städar upp - avregistrerar prenumeration
 LOG  ScanScreen component unmounting
 LOG  Camera screen unmounting, cleaning up
 LOG  [Navigation]: 12:26:03 - ResultScreen avmonteras, städar upp
 LOG  Analytics: Logging event analysis_error {"app_version": 31, "error_message": "Fel i analysen (verify_product): Produkten kunde inte läggas till i historik", "error_type": "analysis_error", "platform": "android"}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead.
 LOG  Camera navigation lock cleared
 LOG  [Navigation]: 12:26:03 - Resultatnavigeringslås rensat
 LOG  AuthProvider: Initial setup
 LOG  AuthProvider: Initial session check {"emailConfirmed": "2025-03-12T12:24:54.281701Z", "hasAvatar": true, "hasSession": true}
 LOG  getUserProducts anropat med: {"hasUser": false, "productsCount": 7, "userId": "ingen användare"}
 WARN  getUserProducts: Ingen inloggad användare hittades [Component Stack]
 LOG  Current user products in store: []
 LOG  UserProfileSync: Kontrollerar första inloggning för användare 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging screen view History
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Analytics: Logging event history_stats {"app_version": 31, "favorite_products": 0, "platform": "android", "total_products": 0, "vegan_products": 0}
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  AuthProvider: Auth state change {"event": "INITIAL_SESSION", "hasSession": true}
 LOG  AuthProvider: Synkroniserar avatar från user_metadata vid auth change: {"id": "rabbit", "style": "cute"}
 LOG  AuthProvider: Användarprofil synkroniserad med store vid auth change
 LOG  AuthProvider: Hanterar ej auth event INITIAL_SESSION
 LOG  AuthProvider: Session has verified email
 LOG  AuthProvider: Synkroniserar avatar vid session check: {"id": "rabbit", "style": "cute"}
 LOG  AuthProvider: Verified user with previous login, redirecting to scan
 LOG  UsageLimitIndicator mounted/updated, current values: {"analysesLimit": 2, "analysesUsed": 0}
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  ScanScreen component mounted, pathname: /
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Analytics: Logging screen view ScanScreen
 WARN  This method is deprecated (as well as all React Native Firebase namespaced API) and will be removed in the next major release as part of move to match Firebase Web modular SDK API. Please see migration guide for more details: https://rnfirebase.io/migrating-to-v22 Please use `getApp()` instead. [Component Stack]
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Navigation state changed, pathname: / isCameraOrSubRoute: false
 LOG  Scan tab focused, ensuring clean state
 LOG  Global app state reset completed
 LOG  Starting debounced reset
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}
 LOG  Performing debounced reset now
 LOG  Performing a global app state reset
 LOG  Resetting scan screen state, current pathname: /
 LOG  Refreshing usage limit for user: 887e6088-1c44-412b-a4d7-b99ef0de82df
 LOG  Global app state reset completed
 LOG  Usage data received: {"analysesLimit": 2, "analysesUsed": 0, "isPremium": false, "remaining": 2}
 LOG  Usage limit refreshed successfully
 LOG  New usage values: {"limit": 2, "remaining": 2, "used": 0}